@model CompanyCatering.ViewModels.OrderViewModel

@*@if (DateTime.Now.TimeOfDay < TimeSpan.Parse("11:00"))*@

<div class="row">
	<div class="col-md-10 offset-1">
		<div class="text-center">
			<h2>Your Order</h2>
		</div>

		<table class="table">
			<thead>
				<tr>
					<th>Quantity</th>
					<th>Item</th>
					<th>Price</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				@foreach (var detail in Model.Order.OrderDetails)
				{
					<tr>
						<td class="align-middle">@detail.Quantity</td>
						<td class="align-middle">@detail.FoodItem.Name</td>
						<td class="align-middle">@detail.Price.ToString("c")</td>
						<td class="align-middle">
							<a class="text-danger" asp-action="RemoveItemFromShoppingCart"
						   asp-route-id="@detail.Id">
								<i class="bi bi-cart-dash"></i>
							</a>
							|
							<a class="text-success" asp-action="AddItemToShoppingCart"
						   asp-route-id="@detail.Id">
								<i class="bi bi-cart-plus"></i>
							</a>
						</td>
					</tr>
				}
			</tbody>
			<tfoot>
				<tr>
					<td colspan="2"></td>
					<td><b>Total:</b></td>
					<td>
						@*@Model.ShoppingCartTotal.ToString("c")*@
					</td>
					<td></td>
				</tr>
			</tfoot>
		</table>

		<div class="text-right">
			<div class="btn-group">
				@*<a class="btn btn-outline-primary" asp-action="CompleteOrder">
				Complete order
				</a>*@
				<div id="paypal-btn"></div>
				<span style="padding:5px"></span>
				<a class="btn btn-outline-success" asp-controller="Movies" asp-action="Index">
					Add more items
				</a>
			</div>
		</div>

	</div>
</div>
@*@section scripts{
	<script>
		$(document).ready(function () {

			$("#orders").on("click", ".js-delete", function () {
				var button = $(this);
				console.log(button.attr("data-order-id"));
				if (confirm("Are you sure you want to delete this item?")) {
					$.ajax({
						url: "/api/employeeorders/" + button.attr("data-order-id"),
						method: "DELETE",
						success: function () {
							button.parent().remove();
						}
					});
				}
			});
		});
	</script>
}*@